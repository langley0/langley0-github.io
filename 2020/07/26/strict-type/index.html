<!doctype html>
<html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no"/><link rel="stylesheet" href="../../../../assets/default.css"/><link rel="stylesheet" href="../../../../assets/markdown.css"/></head><body><header class="site-header"><div class="wrapper"><nav class="site-nav"><div class="trigger"><a class="page-link" href="../../../../">blog</a><a class="page-link" href="../../../../about.html">about</a></div></nav></div></header><div class="page-content"><div class="wrapper"><div class="post"><header class="post-header"><h1 class="post-title">[Typescript]  unknown 과 never 를 이용해 라이브러리 만들어보기</h1><p></p></header><div class="articlebox"><div class="markdown-body"><p><span>Typescript 에서 타입을 다루는 많은 기법들이 있다. Intersction 과 Union 과 같은 일반적인 것부터, Type guards 과 Conditional 과 같이 문법자체가 낯선 것들도 있다. 중요한 것은 이런 많은 장치들이  </span><code class="inlincode">왜</code><span> 필요한가를 알아야 한다는 것이다. 특히  </span><code class="inlincode">unknown</code><span> 과  </span><code class="inlincode">never</code><span> 를 사용하기 위해서는 어떠한 상황에서 필요한지 알고 있으면 많은 도움이 된다. </span></p><p><span>Typescript 를 Javascript 처럼 쓰고 싶으면 모든 타입을 any 로 선언하면 된다. 바꾸어 말하면 any 를 사용하면 Typescript 를 쓰는 이유가 없어진다. Object 도 비슷하다. Object 타입으로 선언된 객체는 모든 클래스인스턴스에 대입이 가능하다. 정말 특별한 목적이 있다면 어쩔수 없지만 대부분의 경우에는 any 그리고 Object 는 타입선언을 번거로움을 피하기 위한 도피처로 선택하는 경우가 많다. </span></p><p><span>타입스크립트를 쓰는 이유는 타입체크를 통해서 오류를 실행전에 발견할 수 있고, 코드를 더욱 효율적이고  </span><em><span>예쁘게 </span> </em><span> 작성할 수 있기 때문이다. </span></p><p><span>따라서 any 를 사용함으로 이런 이점을 버리는 것은 최대한 막아야 한다. </span></p><p><span>이를 위해서  </span><code class="inlincode">unknown</code><span> 과  </span><code class="inlincode">never</code><span> 를 활용하는 방법을 실제 코드사례를 통해서 알아보도록 하자. </span></p><h1><span>array null element optimize </span></h1><p><span>배열중간에 null 데이터가 있는 경우가 있다. 이것을 특정한 함수를 통과하면 null 을 없앨 수 있을까? </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">const</span> arr <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#ccc">[</span><span class="token" style="color:#f08d49">1</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">2</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">4</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">5</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">;</span>

<span class="token" style="color:#cc99cd">const</span> arrWithoutNull <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#f08d49">fn</span><span class="token" style="color:#ccc">(</span>arr<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token console" style="color:#f8c555">console</span><span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">log</span><span class="token" style="color:#ccc">(</span>arrWithoutNull<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> <span class="token" style="color:#999">// [1, 2, 4, 5]</span>
</code></pre></div><p><span>우선 상상할 수 있는 것은 filter 를 사용하는 것이다 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> <span class="token" style="color:#f08d49">fn</span><span class="token" style="color:#ccc">(</span><span class="token parameter">src<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">any</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span></span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">any</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> src<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">filter</span><span class="token" style="color:#ccc">(</span><span class="token parameter">item</span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> item <span class="token" style="color:#67cdcc">!==</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#ccc">}</span>
</code></pre></div><p><span>자바스크립트였다면 이렇게만 만들어도 충분했을 것이다. 하지만 우리는 타입스크립트니까 any 를 없애보도록 하겠다. </span></p><p><span>우선 arr 의 타입은  </span><code class="inlincode">(number | null)[]</code><span> 이 된다. 이것을 입력으로 fn 함수를 다시 작성해보자 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> <span class="token" style="color:#f08d49">fn</span><span class="token" style="color:#ccc">(</span><span class="token parameter">src<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">number</span><span class="token" style="color:#67cdcc">|</span><span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span></span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">number</span><span class="token" style="color:#67cdcc">|</span><span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> src<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">filter</span><span class="token" style="color:#ccc">(</span><span class="token parameter">item</span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> item <span class="token" style="color:#67cdcc">!==</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#ccc">}</span>
</code></pre></div><p><span>여기서 제네릭을 이용해서 좀 더 범용적인 함수로 업그레이드가 가능하다 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> fn<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>src<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> src<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">filter</span><span class="token" style="color:#ccc">(</span><span class="token parameter">item</span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> item <span class="token" style="color:#67cdcc">!==</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#ccc">}</span>
</code></pre></div><p><span>이제 이 함수는  </span><code class="inlincode">[&quot;a&quot;, &quot;b&quot;, null, &quot;d&quot;]</code><span> 와 같은 입력도  처리할 수 있게 되었다. </span></p><p><span>이렇게 하면 끝난것 같지만 실제로 사용하려고 하면 코드가 예쁘지 않는 문제가 있다. 다음의 상황을 보자 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">const</span> arr <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#ccc">[</span><span class="token" style="color:#f08d49">1</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">2</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">4</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">5</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#cc99cd">const</span> numToStr <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#f08d49">fn</span><span class="token" style="color:#ccc">(</span>arr<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">map</span><span class="token" style="color:#ccc">(</span><span class="token parameter">item</span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> item<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">toString</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>

<span class="token console" style="color:#f8c555">console</span><span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">log</span><span class="token" style="color:#ccc">(</span>numToStr<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> <span class="token" style="color:#999">// expect [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;4&#x27;, &#x27;5&#x27;] .. but error</span>
</code></pre></div><p><span>위의 코드에서  </span><code class="inlincode">item.toString()</code><span> 에서  </span><strong><em><span>&quot;객체가 null 일 수 있습니다&quot; </span> </em> </strong><span> 오류가 발생한다.  </span><code class="inlincode">fn()</code><span> 의 리턴타입이  </span><code class="inlincode">(number|null)[]</code><span> 이기 때문에 item 역시  </span><code class="inlincode">number|null</code><span> 이 되며, null 을 포함한 변수에 아무런 보호장치 없이 접근하면 타입스크립트는 오류를 내기 때문이다. 하지만 우리는 결과값에 null 이 없다는 것을 알고 있다. 그렇다면 어떻게 이 함수를 구성할 수 있을까? </span></p><p><span>여기서 사용되는 것은 never 이다. </span></p><p><span>( Conditional Type 에 대해서는 여기서 설명하지 않는다. ) </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">type</span> <span class="token maybe-class-name">NonNullable</span><span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span> <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#f8c555">T</span> <span class="token" style="color:#cc99cd">extends</span> <span class="token" style="color:#f8c555">null</span> <span class="token" style="color:#67cdcc">|</span> undefined <span class="token" style="color:#67cdcc">?</span> <span class="token" style="color:#cc99cd">never</span> <span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">;</span>

<span class="token" style="color:#cc99cd">declare</span> <span class="token" style="color:#cc99cd">function</span> fn<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>src<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token maybe-class-name">NonNullable</span><span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">;</span>
</code></pre></div><p><span>자 실제 상황을 살펴보면  </span><code class="inlincode">type T = number|null</code><span> 이라고 하면NonNullable 은 다음과 같이 해석된다. </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">type</span> <span class="token maybe-class-name">NonNullable</span><span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#cc99cd">number</span><span class="token" style="color:#67cdcc">|</span>undefine<span class="token" style="color:#67cdcc">&gt;</span> <span class="token" style="color:#67cdcc">=</span> 
 <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">number</span> <span class="token" style="color:#cc99cd">extends</span> <span class="token" style="color:#f8c555">null</span> <span class="token" style="color:#67cdcc">|</span>undefine <span class="token" style="color:#67cdcc">?</span> <span class="token function-variable" style="color:#f08d49">never</span> <span class="token" style="color:#ccc">:</span> <span class="token parameter"><span class="token" style="color:#cc99cd">number</span></span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> <span class="token" style="color:#cc99cd">number</span><span class="token" style="color:#ccc">)</span>  <span class="token" style="color:#67cdcc">|</span> 
 <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">null</span> <span class="token" style="color:#cc99cd">extends</span> <span class="token" style="color:#f8c555">null</span> <span class="token" style="color:#67cdcc">|</span>undefine <span class="token" style="color:#67cdcc">?</span> <span class="token function-variable" style="color:#f08d49">never</span> <span class="token" style="color:#ccc">:</span> <span class="token parameter"><span class="token" style="color:#cc99cd">number</span></span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> <span class="token" style="color:#cc99cd">never</span><span class="token" style="color:#ccc">)</span> 
 
 <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#cc99cd">number</span> <span class="token" style="color:#67cdcc">|</span> <span class="token" style="color:#cc99cd">never</span> <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#cc99cd">number</span><span class="token" style="color:#ccc">;</span>
</code></pre></div><p><code class="inlincode">never</code><span> 는 그자체의 의미는 아무런 타입도 아니라는 뜻이다. void 와 혼동될 수 있는데, void 는 &quot;빈값&quot; 이라는 특수한 값을 담을 수 있는 타입이다. never 는 담을 수 있는 타입이 없는데, 이를 명확히 보여주는  예제를 준비하였다. </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> <span class="token" style="color:#f08d49"><span class="token maybe-class-name">ReturnVoid</span></span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">void</span> <span class="token" style="color:#ccc">{</span><span class="token" style="color:#ccc">}</span>

<span class="token" style="color:#cc99cd">function</span> <span class="token known-class-name" style="color:#f8c555">ReturnNeverError</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">never</span> <span class="token" style="color:#ccc">{</span><span class="token" style="color:#ccc">}</span> <span class="token" style="color:#999">// 에러: &#x27;never&#x27; 를 반환하는 함수에는 연결 가능한 끝점이 있을 수 없습니다</span>

<span class="token" style="color:#cc99cd">function</span> <span class="token" style="color:#f08d49"><span class="token maybe-class-name">ReturnNeverOk</span></span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">never</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">throw</span> <span class="token" style="color:#cc99cd">new</span> <span class="token" style="color:#f8c555">Error</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
    <span class="token" style="color:#999">// 이 함수에는 return 이 없기 때문에 리턴타입은 never 가 된다 </span>
<span class="token" style="color:#ccc">}</span> 
</code></pre></div><p><span>그리고 추가로 Union Type 규칙에 의해서  </span><code class="inlincode">never | void = void</code><span> 가 된다. ( </span><code class="inlincode">never | T = T</code><span> 이기 때문에) </span></p><p><span>이제 함수의 내용을 채워보도록 하자 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> fn<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>src<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token maybe-class-name">NonNullable</span><span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> src<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">filter</span><span class="token" style="color:#ccc">(</span><span class="token parameter">item</span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> item <span class="token" style="color:#67cdcc">!==</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> <span class="token" style="color:#999">// error: T[] 형식은 NonNullable&lt;T&gt;[] 에 할당할 수 없습니다</span>
<span class="token" style="color:#ccc">}</span>
</code></pre></div><p><span>T 는 NonNullable&lt;T&gt; 보다 큰 집합이기 때문에  </span><code class="inlincode">NonNullable&lt;T&gt; =&gt; T : ok,  T =&gt; NonNullable&lt;T&gt; : error</code><span> 가 된다. 여기서 사용할 수 있는 것이 타입을 한정지어주는 타입가드이다 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> isNonNullable<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>src<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> src <span class="token" style="color:#cc99cd">is</span> <span class="token maybe-class-name">NonNullable</span><span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span> <span class="token" style="color:#ccc">{</span>
  <span class="token" style="color:#cc99cd">return</span> <span class="token" style="color:#ccc">(</span>src <span class="token" style="color:#67cdcc">!==</span> <span class="token" style="color:#cc99cd">null</span> <span class="token" style="color:#67cdcc">&amp;&amp;</span> src <span class="token" style="color:#67cdcc">!==</span> undefined<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#ccc">}</span>

<span class="token" style="color:#cc99cd">let</span> foo<span class="token" style="color:#ccc">:</span> <span class="token maybe-class-name">Foo</span> <span class="token" style="color:#67cdcc">|</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#cc99cd">if</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#f08d49">isNonNullable</span><span class="token" style="color:#ccc">(</span>foo<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span> <span class="token" style="color:#ccc">{</span> 
    <span class="token" style="color:#999">// foo 는 null 이나 undefined 가 아닌값이다</span>
    <span class="token" style="color:#999">// 따라서 멤버 메소드를 호출할때 null 체크를 하지 않아도 타입오류가 발생하지 않는다</span>
    foo<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">fn</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#ccc">}</span>
</code></pre></div><p><span>위에서 작성한 타입가드를 이용해서 실제 작성된 코드이다 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> isNonNullable<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>src<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> src <span class="token" style="color:#cc99cd">is</span> <span class="token maybe-class-name">NonNullable</span><span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> <span class="token" style="color:#ccc">(</span>src <span class="token" style="color:#67cdcc">!==</span> <span class="token" style="color:#cc99cd">null</span> <span class="token" style="color:#67cdcc">&amp;&amp;</span> src <span class="token" style="color:#67cdcc">!==</span> undefined<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
  <span class="token" style="color:#ccc">}</span>
  
<span class="token" style="color:#cc99cd">function</span> nonNullable<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>array<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token maybe-class-name">NonNullable</span><span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">const</span> initialValue<span class="token" style="color:#ccc">:</span> <span class="token maybe-class-name">NonNullable</span><span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span> <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">;</span>
    <span class="token" style="color:#cc99cd">return</span> array<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">reduce</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">(</span><span class="token parameter">list<span class="token" style="color:#ccc">,</span> item</span><span class="token" style="color:#ccc">)</span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> <span class="token" style="color:#ccc">{</span>
        <span class="token" style="color:#cc99cd">if</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#f08d49">isNonNullable</span><span class="token" style="color:#ccc">(</span>item<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span> <span class="token" style="color:#ccc">{</span>
        list<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">push</span><span class="token" style="color:#ccc">(</span>item<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
        <span class="token" style="color:#ccc">}</span>
        <span class="token" style="color:#cc99cd">return</span> list<span class="token" style="color:#ccc">;</span>
    <span class="token" style="color:#ccc">}</span><span class="token" style="color:#ccc">,</span> initialValue<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#ccc">}</span>

<span class="token" style="color:#cc99cd">const</span> arr<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">number</span> <span class="token" style="color:#67cdcc">|</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span> <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#ccc">[</span><span class="token" style="color:#f08d49">1</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">2</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">4</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">5</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#cc99cd">const</span> arrWithoutNull<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">number</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span> <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#f08d49">nonNullable</span><span class="token" style="color:#ccc">(</span>arr<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token console" style="color:#f8c555">console</span><span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">log</span><span class="token" style="color:#ccc">(</span>arrWithoutNull<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> <span class="token" style="color:#999">// [1, 2, 4, 5]</span>
</code></pre></div><p><span>어때요. 간단하죠? </span></p><h1><span>숫자 배열의 총합 </span></h1><p><span>배열의 총합을 구하는 함수를 만들어보자 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> sum<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>array<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">number</span> <span class="token" style="color:#ccc">{</span>
  <span class="token" style="color:#999">// error : operator &#x27;+&#x27; cannot be applied to types &#x27;number&#x27; and &#x27;T&#x27;</span>
  <span class="token" style="color:#cc99cd">return</span> array<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">reduce</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">(</span><span class="token parameter">prev<span class="token" style="color:#ccc">,</span> item</span><span class="token" style="color:#ccc">)</span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> prev <span class="token" style="color:#67cdcc">+</span> item<span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">0</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> 
<span class="token" style="color:#ccc">}</span>
</code></pre></div><p><span>안타깝게도 + 연산자를 T 에 적용할 수 없다면 오류가 난다. + 연산자는 미리 선언된 특별한 타입에만 적용가능하기 때문이다. </span></p><p><span>이경우에 우리는 위에서 배운 타입가드로 해결할 수 있다 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> sum<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>array<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">number</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> array<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">reduce</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">(</span><span class="token parameter">prev<span class="token" style="color:#ccc">,</span> item</span><span class="token" style="color:#ccc">)</span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> <span class="token" style="color:#ccc">{</span>
        <span class="token" style="color:#cc99cd">return</span> prev <span class="token" style="color:#67cdcc">+</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#f08d49">isNumber</span><span class="token" style="color:#ccc">(</span>item<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#67cdcc">?</span> item <span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f08d49">0</span><span class="token" style="color:#ccc">)</span>
    <span class="token" style="color:#ccc">}</span> <span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">0</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> 
<span class="token" style="color:#ccc">}</span>
  

<span class="token" style="color:#cc99cd">function</span> isNumber<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>value<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> value <span class="token" style="color:#cc99cd">is</span> <span class="token" style="color:#cc99cd">number</span> <span class="token" style="color:#ccc">{</span>  <span class="token" style="color:#999">// error: </span>
    <span class="token" style="color:#999">// A type predicate&#x27;s type must be assignable to its parameter&#x27;s type.</span>
    <span class="token" style="color:#999">// Type &#x27;number&#x27; is not assignable to type &#x27;T&#x27;.</span>
    <span class="token" style="color:#999">// &#x27;T&#x27; could be instantiated with an arbitrary type which could be unrelated to &#x27;number&#x27;.(2677)</span>
    <span class="token" style="color:#cc99cd">return</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">typeof</span> <span class="token" style="color:#ccc">(</span>value<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#67cdcc">===</span> <span class="token" style="color:#7ec699">&#x27;number&#x27;</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#ccc">}</span>
</code></pre></div><p><span>T 를 number 로 변환하기 위해서는 number 가 T 의 서브셋이어야 하는데,  T 의 조건이 너무 광범위하기 때문에 이 상황을 특정지을수 없다라는 의미이다. </span></p><p><span>일반적으로 이런 경우 any 를 사용할 수 있다 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> <span class="token" style="color:#f08d49">isNumber</span><span class="token" style="color:#ccc">(</span><span class="token parameter">value<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">any</span></span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> value <span class="token" style="color:#cc99cd">is</span> <span class="token" style="color:#cc99cd">number</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">typeof</span> <span class="token" style="color:#ccc">(</span>value<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#67cdcc">===</span> <span class="token" style="color:#7ec699">&#x27;number&#x27;</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#ccc">}</span>
</code></pre></div><p><span>하지만 우리는 any 를 최대한 없애고 싶다. 그럴때 사용하는 것이  </span><code class="inlincode">unknown</code><span> 이다. </span></p><p><code class="inlincode">unknown</code><span> 은 any 대신에 코드를 좀 더 명확하게 만들어주는 역활을 한다. 다음 코드를 비교해보자 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">const</span> x<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">any</span> <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#f08d49">1</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#cc99cd">const</span> y<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">unknown</span> <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#f08d49">2</span><span class="token" style="color:#ccc">;</span>

<span class="token console" style="color:#f8c555">console</span><span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">log</span><span class="token" style="color:#ccc">(</span>x<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">toString</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> <span class="token" style="color:#999">// &#x27;1&#x27;</span>
<span class="token console" style="color:#f8c555">console</span><span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">log</span><span class="token" style="color:#ccc">(</span>y<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">toString</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> <span class="token" style="color:#999">// error: Object is of type &#x27;unknown&#x27;</span>
</code></pre></div><p><span>any 는 위와 같이 프라퍼티나 메소드를 사용하는데 컴파일러가 제한을 두지 않는데, unknown 은 프라퍼티나 메소드를 전혀 사용할 수 없게 지정한다. 이것은 값은 전파하되, 사용은 금지하는 효과를 가져오기 때문에 리팩토링 과정에서 any 와는 다르게 타입을 바꾸었을때 undefined 오류가 나지 않는 이점이 있다. </span></p><p><code class="inlincode">unknown</code><span> 은 어느 타입으로나 변경이 가능한 장점이 있다 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> <span class="token" style="color:#f08d49">prettyPrint</span><span class="token" style="color:#ccc">(</span><span class="token parameter">x<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">unknown</span></span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">string</span> <span class="token" style="color:#ccc">{</span>
  <span class="token" style="color:#cc99cd">if</span> <span class="token" style="color:#ccc">(</span><span class="token known-class-name" style="color:#f8c555">Array</span><span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">isArray</span><span class="token" style="color:#ccc">(</span>x<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> <span class="token" style="color:#7ec699">&quot;[&quot;</span> <span class="token" style="color:#67cdcc">+</span> x<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">map</span><span class="token" style="color:#ccc">(</span>prettyPrint<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">join</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#7ec699">&quot;, &quot;</span><span class="token" style="color:#ccc">)</span> <span class="token" style="color:#67cdcc">+</span> <span class="token" style="color:#7ec699">&quot;]&quot;</span>
  <span class="token" style="color:#ccc">}</span>
  <span class="token" style="color:#cc99cd">if</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">typeof</span> x <span class="token" style="color:#67cdcc">===</span> <span class="token" style="color:#7ec699">&quot;string&quot;</span><span class="token" style="color:#ccc">)</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> <span class="token template-string"><span class="token template-punctuation" style="color:#7ec699">`</span><span class="token" style="color:#7ec699">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation" style="color:#ccc">${</span>x<span class="token interpolation-punctuation" style="color:#ccc">}</span></span><span class="token" style="color:#7ec699">&quot;</span><span class="token template-punctuation" style="color:#7ec699">`</span></span>
  <span class="token" style="color:#ccc">}</span>
  <span class="token" style="color:#cc99cd">if</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">typeof</span> x <span class="token" style="color:#67cdcc">===</span> <span class="token" style="color:#7ec699">&quot;number&quot;</span><span class="token" style="color:#ccc">)</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> <span class="token known-class-name" style="color:#f8c555">String</span><span class="token" style="color:#ccc">(</span>x<span class="token" style="color:#ccc">)</span>
  <span class="token" style="color:#ccc">}</span> 
  <span class="token" style="color:#cc99cd">return</span> <span class="token" style="color:#7ec699">&quot;etc.&quot;</span>
<span class="token" style="color:#ccc">}</span>
</code></pre></div><p><code class="inlincode">unknown</code><span> 을 이용해서 배열의 숫자들의 합을 구하는 함수를 완성하도록 하자 </span></p><div style="background-color:#111;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto"><pre style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0;margin:0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">function</span> <span class="token" style="color:#f08d49">isNumber</span><span class="token" style="color:#ccc">(</span><span class="token parameter">src<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">unknown</span></span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> src <span class="token" style="color:#cc99cd">is</span> <span class="token" style="color:#cc99cd">number</span> <span class="token" style="color:#ccc">{</span>
  <span class="token" style="color:#cc99cd">return</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#cc99cd">typeof</span> <span class="token" style="color:#ccc">(</span>src<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#67cdcc">===</span> <span class="token" style="color:#7ec699">&#x27;number&#x27;</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span>
<span class="token" style="color:#ccc">}</span>

<span class="token" style="color:#cc99cd">function</span> sum<span class="token" style="color:#67cdcc">&lt;</span><span class="token" style="color:#f8c555">T</span><span class="token" style="color:#67cdcc">&gt;</span><span class="token" style="color:#ccc">(</span>array<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f8c555">T</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">:</span> <span class="token" style="color:#cc99cd">number</span> <span class="token" style="color:#ccc">{</span>
    <span class="token" style="color:#cc99cd">return</span> array<span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">reduce</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">(</span><span class="token parameter">prev<span class="token" style="color:#ccc">,</span> item</span><span class="token" style="color:#ccc">)</span> <span class="token arrow" style="color:#67cdcc">=&gt;</span> <span class="token" style="color:#ccc">{</span>
        <span class="token" style="color:#cc99cd">return</span> prev <span class="token" style="color:#67cdcc">+</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#f08d49">isNumber</span><span class="token" style="color:#ccc">(</span>item<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#67cdcc">?</span> item <span class="token" style="color:#ccc">:</span> <span class="token" style="color:#f08d49">0</span><span class="token" style="color:#ccc">)</span>
    <span class="token" style="color:#ccc">}</span> <span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">0</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> 
<span class="token" style="color:#ccc">}</span>
<span class="token console" style="color:#f8c555">console</span><span class="token" style="color:#ccc">.</span><span class="token method property-access" style="color:#f08d49">log</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#f08d49">sum</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#ccc">[</span><span class="token" style="color:#f08d49">1</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">2</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#cc99cd">null</span><span class="token" style="color:#ccc">,</span> <span class="token" style="color:#f08d49">3</span><span class="token" style="color:#ccc">]</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">;</span> <span class="token" style="color:#999">// 6</span>
</code></pre></div><p><span>again 참 쉽죠? </span></p></div></div></div></div></div><footer></footer></body></html>